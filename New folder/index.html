<!DOCTYPE html>
<html>
<head>
<title>Heico Electric Inc. | Electrician Kalispell MT</title>

<link rel="icon" href="heico-logo.png">

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>

body{
font-family: Arial, sans-serif;
background:#0b1220;
color:white;
margin:0;
text-align:center;
}

.header{
background:#111a2e;
padding:25px;
}

.logo{
height:80px;
}

.section{
padding:50px 20px;
max-width:1100px;
margin:auto;
}

.gallery{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
gap:20px;
margin-top:30px;
}

.gallery img{
width:100%;
border-radius:8px;
cursor:pointer;
}

.btn{
display:inline-block;
background:#3aa0ff;
padding:12px 22px;
margin:10px;
border-radius:6px;
color:white;
text-decoration:none;
font-weight:bold;
}

.btn:hover{
background:#5db3ff;
}

form{
max-width:500px;
margin:auto;
display:flex;
flex-direction:column;
gap:12px;
}

input, select, textarea{
padding:12px;
border-radius:6px;
border:none;
}

.footer{
background:#111a2e;
padding:20px;
margin-top:40px;
font-size:14px;
}

</style>
</head>

<body>

<!-- HEADER -->

<div class="header">
<img src="heico-logo.png" class="logo">
<h1>Heico Electric Inc.</h1>
<h3>“Thats Watts up”</h3>
</div>

<!-- ABOUT -->

<div class="section">
<h2>Custom Homes & Commercial Electrical</h2>

<p>
Serving Kalispell, Whitefish, Bigfork, Lakeside, Somers, and Polson
</p>

<p>
Call: <a href="tel:14062122398">(406) 212-2398</a><br>
Email: <a href="mailto:Mitchell@heico-mt.com">Mitchell@heico-mt.com</a>
</p>

</div>

<!-- PROJECT GALLERY -->
<section id="projects" class="section">
  <h2>Recent Projects</h2>
  <div id="projectsGrid" class="gallery"></div>
</section>



</div>

<!-- GOOGLE REVIEWS -->

<div class="section">
<h2>Customer Reviews</h2>

<a class="btn" target="_blank"
href="https://search.google.com/local/reviews?placeid=10387671402966563368">
Read Google Reviews
</a>

<a class="btn" target="_blank"
href="https://search.google.com/local/writereview?placeid=10387671402966563368">
Leave A Review
</a>

</div>

<!-- QUOTE FORM -->

<div class="section">
<h2>Request A Quote</h2>

<form name="quote" method="POST" data-netlify="true">

<input type="hidden" name="form-name" value="quote">

<input name="name" placeholder="Name" required>
<input name="phone" placeholder="Phone" required>
<input name="email" placeholder="Email">

<select name="projectType" required>
<option value="">Project Type</option>
<option>Custom Home</option>
<option>Commercial</option>
<option>Service Call</option>
<option>Panel Upgrade</option>
<option>Remodel / Addition</option>
</select>

<textarea name="message" placeholder="Tell us about your project..." required></textarea>

<button class="btn" type="submit">Submit Quote Request</button>

</form>

</div>

<!-- WHY CHOOSE US -->

<div class="section">
<h2>Why Choose Heico Electric</h2>

<p>
✔ Clean Professional Installations<br>
✔ Code Compliant Workmanship<br>
✔ Custom Home Specialists<br>
✔ Local NW Montana Company<br>
✔ Honest Reliable Service
</p>

</div>

<!-- FOOTER -->
<!-- REQUEST ESTIMATE -->
<section id="estimate" class="section estimate">
  <div class="estimate-wrap">
    <h2>Request an Estimate</h2>
    <p class="estimate-sub">Tell us a little about your project and we’ll get back to you quickly.</p>

    <form name="estimate" method="POST" data-netlify="true" enctype="multipart/form-data" class="estimate-form">
      <input type="hidden" name="form-name" value="estimate" />

      <div class="grid">
        <div class="field">
          <label for="est-name">Name</label>
          <input id="est-name" name="name" type="text" placeholder="Your name" required />
        </div>

        <div class="field">
          <label for="est-phone">Phone</label>
          <input id="est-phone" name="phone" type="tel" placeholder="(406) 212-2398" required />
        </div>

        <div class="field">
          <label for="est-email">Email</label>
          <input id="est-email" name="email" type="email" placeholder="you@email.com" />
        </div>

        <div class="field">
          <label for="est-city">City / Area</label>
          <input id="est-city" name="city" type="text" placeholder="Kalispell / Whitefish / Bigfork / Polson…" />
        </div>

        <div class="field">
          <label for="est-type">Project Type</label>
          <select id="est-type" name="project_type" required>
            <option value="" selected disabled>Select one</option>
            <option>Custom Home (New Build)</option>
            <option>Residential Remodel / Addition</option>
            <option>Commercial</option>
            <option>Service Call / Troubleshooting</option>
            <option>Panel / Service Upgrade</option>
            <option>Generator / Backup Power</option>
            <option>Other</option>
          </select>
        </div>

        <div class="field">
          <label for="est-upgrade">Optional Power Upgrade</label>
          <select id="est-upgrade" name="power_upgrade">
            <option value="" selected>Not sure / N/A</option>
            <option>100A → 200A</option>
            <option>200A → 320/400A</option>
            <option>Meter/main replacement</option>
            <option>Subpanel add</option>
          </select>
        </div>

        <div class="field full">
          <label for="est-details">Project Details</label>
          <textarea id="est-details" name="details" placeholder="What are you building? Timeline? Any plans/photos?" required></textarea>
        </div>

        <div class="field full">
          <label for="est-files">Upload Plans / Photos (optional)</label>
          <input id="est-files" name="attachments" type="file" multiple accept="image/*,.pdf" />
          <div class="hint">Accepted: images or PDFs • up to ~10MB total recommended</div>
        </div>
      </div>

      <button type="submit" class="btn">Send Request</button>

      <div class="prefer">
        Prefer a call? <a href="tel:14062122398">406-212-2398</a> •
        <a href="mailto:Mitchell@heico-mt.com">Mitchell@heico-mt.com</a>
      </div>
    </form>
  </div>
</section>

<style>
  .estimate { padding-top: 44px; padding-bottom: 44px; }
  .estimate-wrap{
    max-width: 920px;
    margin: 0 auto;
    padding: 28px;
    border-radius: 18px;
    background: rgba(15,23,42,.72);
    border: 1px solid rgba(255,255,255,.10);
    backdrop-filter: blur(10px);
  }
  .estimate h2{
    margin: 0 0 8px;
    text-align: center;
  }
  .estimate-sub{
    margin: 0 0 22px;
    text-align: center;
    opacity: .9;
  }
/* --- FIX: stop overlap in the estimate form --- */
.estimateForm .formGrid{
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 14px;
  align-items: start;
}

/* Make labels stack their text + input cleanly */
.estimateForm .formGrid label{
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-width: 0;
}

/* Force inputs/selects/textarea to stay inside their grid cell */
.estimateForm input,
.estimateForm select,
.estimateForm textarea{
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

/* Full-width rows (textarea + upload + anything you want spanning both columns) */
.estimateForm .full{
  grid-column: 1 / -1;
}

/* Mobile: stack into 1 column */
@media (max-width: 720px){
  .estimateForm .formGrid{
    grid-template-columns: 1fr;
  }
  .estimateForm .full{
    grid-column: auto;
  }
}

  .estimate-form .grid{
    display: grid;
    grid-template-columns: repeat(2, minmax(0,1fr));
    gap: 14px 16px;
  }
  .field{ display:flex; flex-direction:column; gap:8px; }
  .field.full{ grid-column: 1 / -1; }

  .field label{
    font-weight: 600;
    font-size: 14px;
    opacity: .95;
  }

  .field input,
  .field select,
  .field textarea{
    width: 100%;
    padding: 12px 12px;
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,.12);
    background: rgba(2,6,23,.55);
    color: #fff;
    outline: none;
  }
  .field textarea{ min-height: 120px; resize: vertical; }

  .field input::placeholder,
  .field textarea::placeholder{ color: rgba(255,255,255,.65); }

  .hint{
    font-size: 12px;
    opacity: .75;
    margin-top: -2px;
  }

  .btn{
    margin-top: 16px;
    width: 100%;
    padding: 12px 14px;
    border-radius: 14px;
    border: 1px solid rgba(255,255,255,.12);
    background: rgba(37,99,235,.95);
    color: #fff;
    font-weight: 700;
    cursor: pointer;
  }
  .btn:hover{ filter: brightness(1.03); }

  .prefer{
    margin-top: 14px;
    text-align: center;
    font-size: 14px;
    opacity: .9;
  }
  .prefer a{ color: #93c5fd; text-decoration: none; }
  .prefer a:hover{ text-decoration: underline; }

  @media (max-width: 720px){
    .estimate-wrap{ padding: 18px; }
    .estimate-form .grid{ grid-template-columns: 1fr; }
  }
</style>

</div>

<!-- GALLERY LOADER -->

<script>
async function loadGallery(){

try{

const res = await fetch("gallery.json");
const data = await res.json();

const grid = document.getElementById("galleryGrid");

data.projects.forEach(p => {

grid.innerHTML += `
<div>
<img src="${p.image}">
<h4>${p.title}</h4>
<p>${p.subtitle}</p>
</div>
`;

});

}catch(e){
console.log("Gallery not loaded yet");
}

}

loadGallery();
</script>
<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
<script>
  if (window.netlifyIdentity) {
    window.netlifyIdentity.on("init", user => {
      if (!user) {
        window.netlifyIdentity.on("login", () => {
          document.location.href = "/admin/";
        });
      }
    });
  }
</script>
  <section id="projects" style="padding:60px 20px;">
  <div style="max-width:1100px;margin:0 auto;">
    <h2 style="margin:0 0 18px;">Projects</h2>
    <p style="margin:0 0 24px;opacity:.85;">Custom homes & commercial electrical across NW Montana.</p>
    <div id="projectsGrid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px;"></div>
  </div>
</section>

<!-- Lightbox -->
<div id="lightbox" style="position:fixed;inset:0;background:rgba(0,0,0,.85);display:none;align-items:center;justify-content:center;z-index:9999;padding:18px;">
  <div style="width:min(980px, 100%);">
    <div style="display:flex;justify-content:space-between;align-items:center;color:#fff;margin-bottom:10px;">
      <div>
        <div id="lbTitle" style="font-size:18px;font-weight:700;"></div>
        <div id="lbSubtitle" style="opacity:.85;font-size:14px;margin-top:2px;"></div>
      </div>
      <button id="lbClose" style="background:#fff;border:none;border-radius:10px;padding:10px 12px;cursor:pointer;">Close</button>
    </div>

    <div style="display:flex;gap:10px;align-items:center;">
      <button id="lbPrev" style="background:rgba(255,255,255,.15);color:#fff;border:1px solid rgba(255,255,255,.25);border-radius:12px;padding:10px 12px;cursor:pointer;">◀</button>

      <div style="flex:1;background:#111;border-radius:16px;overflow:hidden;aspect-ratio:16/10;display:flex;align-items:center;justify-content:center;">
        <img id="lbImg" alt="Project photo" style="width:100%;height:100%;object-fit:contain;display:block;">
      </div>

      <button id="lbNext" style="background:rgba(255,255,255,.15);color:#fff;border:1px solid rgba(255,255,255,.25);border-radius:12px;padding:10px 12px;cursor:pointer;">▶</button>
    </div>

    <div id="lbDots" style="display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin-top:12px;"></div>
  </div>
</div>

<script>
  const grid = document.getElementById('projectsGrid');
  const lightbox = document.getElementById('lightbox');
  const lbImg = document.getElementById('lbImg');
  const lbTitle = document.getElementById('lbTitle');
  const lbSubtitle = document.getElementById('lbSubtitle');
  const lbDots = document.getElementById('lbDots');

  let currentPhotos = [];
  let currentIndex = 0;

  function normalizePhotos(p) {
    // New format: photos: ["...","..."]
    if (Array.isArray(p.photos) && p.photos.length) return p.photos;

    // Backward compatible: image: "/images/..."
    if (p.image) return [p.image];

    return [];
  }

  function openLightbox(project, startIndex = 0) {
    currentPhotos = normalizePhotos(project);
    currentIndex = Math.max(0, Math.min(startIndex, currentPhotos.length - 1));

    lbTitle.textContent = project.title || '';
    lbSubtitle.textContent = project.subtitle || '';

    renderLightbox();
    lightbox.style.display = 'flex';
    document.body.style.overflow = 'hidden';
  }

  function closeLightbox() {
    lightbox.style.display = 'none';
    document.body.style.overflow = '';
    currentPhotos = [];
    currentIndex = 0;
  }

  function renderLightbox() {
    if (!currentPhotos.length) return;

    lbImg.src = currentPhotos[currentIndex];

    // dots
    lbDots.innerHTML = currentPhotos.map((_, i) => {
      const active = i === currentIndex;
      return `<button data-i="${i}"
        style="width:10px;height:10px;border-radius:50%;border:none;cursor:pointer;opacity:${active ? 1 : .4};background:#fff;"></button>`;
    }).join('');
  }

  function prevPhoto() {
    if (!currentPhotos.length) return;
    currentIndex = (currentIndex - 1 + currentPhotos.length) % currentPhotos.length;
    renderLightbox();
  }

  function nextPhoto() {
    if (!currentPhotos.length) return;
    currentIndex = (currentIndex + 1) % currentPhotos.length;
    renderLightbox();
  }

  document.getElementById('lbClose').addEventListener('click', closeLightbox);
  document.getElementById('lbPrev').addEventListener('click', prevPhoto);
  document.getElementById('lbNext').addEventListener('click', nextPhoto);

  lightbox.addEventListener('click', (e) => {
    if (e.target === lightbox) closeLightbox();
  });

  lbDots.addEventListener('click', (e) => {
    const btn = e.target.closest('button[data-i]');
    if (!btn) return;
    currentIndex = parseInt(btn.getAttribute('data-i'), 10);
    renderLightbox();
  });

  document.addEventListener('keydown', (e) => {
    if (lightbox.style.display !== 'flex') return;
    if (e.key === 'Escape') closeLightbox();
    if (e.key === 'ArrowLeft') prevPhoto();
    if (e.key === 'ArrowRight') nextPhoto();
  });

  fetch('/gallery.json', { cache: 'no-store' })
    .then(r => r.json())
    .then(data => {
      const projects = (data && data.projects) ? data.projects : [];
      if (!projects.length) {
        grid.innerHTML = '<div style="opacity:.8;">Projects coming soon.</div>';
        return;
      }

      grid.innerHTML = projects.map((p, idx) => {
        const photos = normalizePhotos(p);
        const cover = photos[0] || '';
        const countBadge = photos.length > 1
          ? `<div style="position:absolute;top:10px;right:10px;background:rgba(0,0,0,.7);color:#fff;padding:6px 10px;border-radius:999px;font-size:12px;">
               ${photos.length} photos
             </div>`
          : '';

        return `
          <article data-idx="${idx}"
            style="cursor:pointer;border:1px solid rgba(0,0,0,.08);border-radius:16px;overflow:hidden;background:#fff;position:relative;">
            <div style="aspect-ratio:4/3;background:#f4f4f4;">
              ${cover ? `<img src="${cover}" alt="${p.title || 'Project'}"
                style="width:100%;height:100%;object-fit:cover;display:block;">` : ''}
            </div>
            ${countBadge}
            <div style="padding:14px;">
              <h3 style="margin:0 0 6px;font-size:16px;line-height:1.2;">${p.title || ''}</h3>
              ${p.subtitle ? `<div style="opacity:.8;font-size:14px;">${p.subtitle}</div>` : ''}
            </div>
          </article>
        `;
      }).join('');

      grid.addEventListener('click', (e) => {
        const card = e.target.closest('article[data-idx]');
        if (!card) return;
        const i = parseInt(card.getAttribute('data-idx'), 10);
        openLightbox(projects[i], 0);
      });
    })
    .catch(() => {
      grid.innerHTML = '<div style="opacity:.8;">Unable to load projects.</div>';
    });
</script>
<!-- LIGHTBOX -->
<div id="lightbox" style="position:fixed;inset:0;background:rgba(0,0,0,.85);display:none;align-items:center;justify-content:center;z-index:9999;padding:18px;">
  <div style="width:min(980px, 100%);">
    <div style="display:flex;justify-content:space-between;align-items:center;color:#fff;margin-bottom:10px;">
      <div>
        <div id="lbTitle" style="font-size:18px;font-weight:700;"></div>
        <div id="lbSubtitle" style="opacity:.85;font-size:14px;margin-top:2px;"></div>
      </div>
      <button id="lbClose" style="background:#fff;border:none;border-radius:10px;padding:10px 12px;cursor:pointer;">Close</button>
    </div>

    <div style="display:flex;gap:10px;align-items:center;">
      <button id="lbPrev" style="background:rgba(255,255,255,.15);color:#fff;border:1px solid rgba(255,255,255,.25);border-radius:12px;padding:10px 12px;cursor:pointer;">◀</button>

      <div style="flex:1;background:#111;border-radius:16px;overflow:hidden;aspect-ratio:16/10;display:flex;align-items:center;justify-content:center;">
        <img id="lbImg" alt="Project photo" style="width:100%;height:100%;object-fit:contain;display:block;">
      </div>

      <button id="lbNext" style="background:rgba(255,255,255,.15);color:#fff;border:1px solid rgba(255,255,255,.25);border-radius:12px;padding:10px 12px;cursor:pointer;">▶</button>
    </div>

    <div id="lbDots" style="display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin-top:12px;"></div>
  </div>
</div>
<div class="section">
<h2>Request an Estimate</h2>

<form name="estimate" method="POST" data-netlify="true">

<input type="hidden" name="form-name" value="estimate">

<p>
<input type="text" name="name" placeholder="Full Name" required>
</p>

<p>
<input type="tel" name="phone" placeholder="Phone Number" required>
</p>

<p>
<input type="email" name="email" placeholder="Email" required>
</p>

<p>
<input type="text" name="location" placeholder="Project Location">
</p>

<p>
<select name="project-type">
<option value="">Project Type</option>
<option>Custom Home Electrical</option>
<option>Commercial Electrical</option>
<option>Service / Repair</option>
<option>Panel Upgrade</option>
<option>EV Charger Install</option>
<option>Other</option>
</select>
</p>

<p>
<label>
<input type="checkbox" name="power-upgrade">
 Interested in Service / Power Upgrade
</label>
</p>

<p>
<textarea name="details" placeholder="Project details"></textarea>
</p>

<p>
<button type="submit">Request Estimate</button>
</p>

</form>
</div>

</body>
</html>








